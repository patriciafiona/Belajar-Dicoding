!function r(c,a,s){function u(n,e){if(!a[n]){if(!c[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(d)return d(n,!0);var o=new Error("Cannot find module '"+n+"'");throw o.code="MODULE_NOT_FOUND",o}var i=a[n]={exports:{}};c[n][0].call(i.exports,function(e){return u(c[n][1][e]||e)},i,i.exports,r,c,a,s)}return a[n].exports}for(var d="function"==typeof require&&require,e=0;e<s.length;e++)u(s[e]);return u}({1:[function(e,n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadJS=function(e,n){var t=window.document.getElementsByTagName("script")[0],o=window.document.createElement("script");o.src=e,o.async=!0,t.parentNode.insertBefore(o,t),n&&"function"==typeof n&&(o.onload=n);return o},t.loadCSS=function(e,n,t,o){var i=window.document.createElement("link"),r=n||window.document.getElementsByTagName("script")[0],c=window.document.styleSheets;i.rel="stylesheet",i.href=e,i.media="only x",o&&(i.onload=o);return r.parentNode.insertBefore(i,r),i.onloadcssdefined=function(e){for(var n,t=0;t<c.length;t++)c[t].href&&c[t].href===i.href&&(n=!0);n?e():setTimeout(function(){i.onloadcssdefined(e)})},i.onloadcssdefined(function(){i.media=t||"all"}),i}},{}],2:[function(e,n,t){"use strict";var o=function(e){{if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};o.get||o.set?Object.defineProperty(n,t,o):n[t]=e[t]}return n.default=e,n}}(e("./../commons/scripts/helpers/loaders"));var i={titleInterval:null,defaultTitle:null,currentRoomId:null},r=function(){i.titleInterval&&(clearInterval(i.titleInterval),i.titleInterval=null,document.title=i.defaultTitle)},c=function(e){i.currentRoomId==e[0].room_id&&(function(e){if("granted"!==Notification.permission&&Notification.requestPermission(),!document.hasFocus()){var n=new Notification("Anda menerima pesan baru: ".concat(e[0].username),{icon:e[0].user_avatar,body:e[0].message.startsWith("[file]")?"File attached.":e[0].message});n.onclick=function(){n.close(),window.focus()}}}(e),$(".qcw-container--open").length||$(".qcw-container .qcw-notification-badge").length||$(".qcw-container").prepend('<span class="label qcw-notification-badge"><i class="fa fa-commenting-o"></i> Ada pesan baru</span>'),function(e){r(),$(".qcw-container--open").length||(i.titleInterval=setInterval(function(){document.title="Pesan Baru..."===document.title?e[0].message:"Pesan Baru..."},1500))}(e))},a=function(e,n){QiscusSDK.core.verifyIdentityToken(n).then(function(e){QiscusSDK.core.setUserWithIdentityToken(e)},function(e){return QiscusSDK.core.setErrorMessage("Failed signing in: ".concat(e))})};o.loadJS("https://d3p8ijl4igpb16.cloudfront.net/web/v2.6.5/qiscus-sdk.2.6.5.js",function(){i.defaultTitle=document.title,QiscusSDK.core.init({AppId:window.qismoAppId,mode:"widget",options:{loginSuccessCallback:function(e){!function(e,n){$.post("".concat("https://qismo.qiscus.com","/api/v1/qiscus/initiate_chat"),{app_id:n,user_id:e.email,name:"".concat(e.username," - ").concat(e.email)}).done(function(e){QiscusSDK.render(),QiscusSDK.core.chatGroup(e.data.room_id),QiscusUI.widgetButtonText=window.qismoChatIcon,i.currentRoomId=e.data.room_id})}(e.user,window.qismoAppId)},roomChangedCallback:function(){!function(e,n){qiscus.selected.name=e,qiscus.selected.avatar=n,$(".qcw-notification-badge").remove(),r()}("Dicoding Indonesia (Jam Aktif: 08.00 WIB - 17.00 WIB)",window.CustomerServiceAvatar||"https://d1edrlpyc25xu0.cloudfront.net/kiwari-prod/image/upload/q5sred_vy0/1516689209-ic_qiscus_user.png")},newMessagesCallback:function(e){c(e)}}}),QiscusSDK.core.getNonce().then(function(e){var n={nonce:e.nonce};$.post("/api/qiscus/auth/claim",n).done(function(e){QiscusSDK.core.loader=!1,a(e.data.user_id,e.data.identity_token)}).fail(function(){QiscusSDK.core.loader=!1,QiscusSDK.core.setErrorMessage("Failed Signing In.")})},function(e){return"Failed getting auth nonce ".concat(e)})})},{"./../commons/scripts/helpers/loaders":1}]},{},[2]);